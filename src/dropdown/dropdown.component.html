<div class="dropdown" [ngClass]="settings.containerClasses" [class.open]="isVisible">

  <button type="button" class="dropdown-toggle" [ngClass]="settings.buttonClasses" (click)="toggleDropdown()" [disabled]="disabled">{{ title }}<span class="caret"></span></button>

  <ul *ngIf="isVisible" class="dropdown-menu" [class.pull-right]="settings.pullRight" [class.dropdown-menu-right]="settings.pullRight" [style.max-height]="settings.maxHeight" style="display: block; height: auto; overflow-y: auto;">

    <li class="mdropdown-item search" *ngIf="settings.enableSearch">
      <div class="input-group input-group-sm">
        <span class="input-group-addon" id="sizing-addon3"><i class="fa fa-search"></i></span>
        <input type="text" class="form-control" placeholder="{{ texts.searchPlaceholder }}" aria-describedby="sizing-addon3" [(ngModel)]="searchFilterText" [ngModelOptions]="{standalone: true}" autofocus>
        <span class="input-group-btn" *ngIf="searchFilterText.length > 0">
          <button class="btn btn-default btn-secondary" type="button" (click)="clearSearch($event)"><i class="fa fa-times"></i></button>
        </span>
      </div>
    </li>
    <li class="dropdown-divider divider" *ngIf="settings.enableSearch"></li>
    <li class="mdropdown-item check-control check-control-check" *ngIf="settings.showCheckAll">
      <a href="javascript:;" role="menuitem" tabindex="-1" (click)="checkAll()">
        <span style="width: 16px;" [ngClass]="{'glyphicon glyphicon-ok': settings.checkedStyle !== 'fontawesome','fa fa-check': settings.checkedStyle === 'fontawesome'}"></span> {{ texts.checkAll }}
      </a>
    </li>
    <li class="mdropdown-item check-control check-control-uncheck" *ngIf="settings.showUncheckAll">
      <a href="javascript:;" role="menuitem" tabindex="-1" (click)="uncheckAll()">
        <span style="width: 16px;" [ngClass]="{'glyphicon glyphicon-remove': settings.checkedStyle !== 'fontawesome','fa fa-times': settings.checkedStyle === 'fontawesome'}"></span> {{ texts.uncheckAll }}
      </a>
    </li>
    <li *ngIf="settings.showCheckAll || settings.showUncheckAll" class="dropdown-divider divider"></li>
    <li class="mdropdown-item" [ngStyle]="getItemStyle(option)" *ngFor="let option of options | searchFilter:searchFilterText" (click)='(option.type == "checkbox") && setSelected($event, option)' [class.dropdown-header]='option.type == "label"'>

      <!--                                   -->
      <!--   Add list items by type here!    -->
      <!--                                   -->

      <!-- IF TYPE == label -->
      <ng-template [ngIf]='option.type == "label"'>{{ option.name }}</ng-template>

      <!-- IF TYPE == checkbox -->
      <a *ngIf='option.type == "checkbox"' href="javascript:;" role="menuitem" tabindex="-1" [style.padding-left]="this.parents.length>0&&this.parents.indexOf(option.id)<0&&'30px'">
        <input *ngIf="settings.checkedStyle === 'checkboxes'" type="checkbox" [checked]="isSelected(option)" (click)="preventCheckboxCheck($event, option)" />
        <span *ngIf="settings.checkedStyle === 'glyphicon'" style="width: 16px;" class="glyphicon" [class.glyphicon-ok]="isSelected(option)"></span>
        <span *ngIf="settings.checkedStyle === 'fontawesome'" style="width: 16px;display: inline-block;">
          <i *ngIf="isSelected(option)" class="fa fa-check" aria-hidden="true"></i>
        </span>
        <span [ngClass]="settings.itemClasses" [style.font-weight]="this.parents.indexOf(option.id)>=0?'bold':'normal'">
          {{ option.name }}
        </span>
        <!-- <a> -->
        <img *ngIf="option.image" class="dropdown-image" src="{{option.image}}" />
      </a>

      <!-- IF TYPE == radiogroup -->
      <form *ngIf='option.type == "radiogroup"' href="javascript:;" role="menuitem" tabindex="-1" [style.padding-left]="this.parents.length>0&&this.parents.indexOf(option.id)<0&&'30px'">
        <a *ngFor="let button of option.radioGroup | searchFilter:searchFilterText" href="javascript:;" role="menuitem" tabindex="-1" [style.padding-left]="this.parents.length>0&&this.parents.indexOf(option.id)<0&&'30px'">
          <input type="radio" name="{{button.value}}" value="{{button.name}}" />

          <span [ngClass]="settings.itemClasses" [style.font-weight]="this.parents.indexOf(button.id)>=0?'bold':'normal'">
            {{ button.name }}
          </span>
          <!-- <a> -->
          <img *ngIf="button.image" class="dropdown-image" src="{{button.image}}" />
        </a>
      </form>

      <!-- IF TYPE == radio -->
      <form *ngIf='option.type == "radio"' href="javascript:;" role="menuitem" tabindex="-1" [style.padding-left]="this.parents.length>0&&this.parents.indexOf(option.id)<0&&'30px'">
          <input type="radio" name="{{option.value}}" value="{{option.name}}" />

            <span [ngClass]="settings.itemClasses" [style.font-weight]="this.parents.indexOf(option.id)>=0?'bold':'normal'">
            {{ option.name }}
          </span>
          <!-- <a> -->
          <img *ngIf="option.image" class="dropdown-image" src="{{option.image}}" />
      </form>

      <!-- IF TYPE == dropdown -->
      <a *ngIf='option.type == "dropdown"' href="javascript:;" role="menuitem" tabindex="-1" [style.padding-left]="this.parents.length>0&&this.parents.indexOf(option.id)<0&&'30px'">
        <ss-multiselect-dropdown id="mdselect" [settings]="settings.dropdownSettings" [options]="option.dropDownGroup" [(ngModel)]="optionsModel" (ngModelChange)="onChange($event)" [texts]="selectTexts">UCC Filters</ss-multiselect-dropdown>
      </a>

    </li>
  </ul>

</div>
